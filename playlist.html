<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reproductor de Ense√±anzas</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background-color: #ffeef7;
    color: #2a2a2a;
    text-align: center;
    padding: 20px;
  }
  h1 {
    color: #1d4ed8;
  }
  audio {
    width: 90%;
    margin: 20px 0;
  }
  button {
    background-color: #1d4ed8;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
    margin: 5px;
  }
  button:hover {
    background-color: #2563eb;
  }
  .info {
    margin-top: 10px;
    font-weight: bold;
  }
</style>
</head>
<body>
  <h1>üéß Ense√±anzas</h1>

  <audio id="player" controls></audio>
  <div class="info" id="info">Selecciona una secci√≥n para comenzar</div>

  <div>
    <button onclick="playSection('Salvaci√≥n', ['Salvaci√≥n.mp3'])">Salvaci√≥n</button>
    <button onclick="playSection('Pecado', ['Pecado.mp3'])">Pecado</button>
    <button onclick="playSection('La Palabra', ['La palabra 1.mp3','La palabra 2.mp3','La palabra 3.mp3'])">La Palabra</button>
    <button onclick="playSection('La Oraci√≥n', ['La oraci√≥n 1.mp3','La oraci√≥n 2.mp3','La oraci√≥n 3.mp3','La oraci√≥n 4.mp3','La oraci√≥n 5.mp3'])">La Oraci√≥n</button>
    <button onclick="playSection('Esp√≠ritu Santo', ['Esp√≠ritu Santo 1.mp3','Esp√≠ritu Santo 2.mp3','Esp√≠ritu Santo 3.mp3'])">Esp√≠ritu Santo</button>
  </div>

<script>
const player = document.getElementById("player");
const info = document.getElementById("info");
let currentSection = "";
let playlist = [];
let index = 0;
let positions = {}; // para recordar la posici√≥n al pausar

function playSection(section, files) {
  currentSection = section;
  playlist = files;
  index = 0;
  playCurrent();
}

function playCurrent() {
  const file = playlist[index];
  player.src = encodeURI(file); // evita problemas con tildes y espacios
  const savedTime = positions[currentSection + index];
  if (savedTime) player.currentTime = savedTime;
  player.play();
  updateInfo();
}

function updateInfo() {
  const total = playlist.length;
  const number = index + 1;
  const display = total > 1 ? `${currentSection} ${number} de ${total}` : currentSection;
  info.textContent = `üéµ Reproduciendo: ${display}`;
}

// guardar posici√≥n cuando se pausa
player.addEventListener("pause", () => {
  positions[currentSection + index] = player.currentTime;
});

// avanzar al siguiente
player.addEventListener("ended", () => {
  if (index < playlist.length - 1) {
    index++;
    playCurrent();
  } else {
    info.textContent = `‚úÖ ${currentSection} completo`;
  }
});
</script>
</body>
</html>
